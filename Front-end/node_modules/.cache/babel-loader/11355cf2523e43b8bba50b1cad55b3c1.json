{"ast":null,"code":"var _jsxFileName = \"/Users/lior-atiya/Desktop/Programming/Facework/RoboFriends/src/pages/Register.js\";\nimport React, { Component } from \"react\";\nimport app from '../database/firebase_config';\nimport { getAuth, RecaptchaVerifier, signInWithPhoneNumber } from \"firebase/auth\";\nconst auth = getAuth(app);\nexport default class Register extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fname: \"\",\n      lname: \"\",\n      email: \"\",\n      password: \"\",\n      verifyButton: false,\n      verifyOtp: false,\n      otp: \"\",\n      verified: false\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.onSignInSubmit = this.onSignInSubmit.bind(this);\n    this.verifyCode = this.verifyCode.bind(this);\n  }\n\n  onCaptchVerify() {\n    const auth = getAuth();\n    window.recaptchaVerifier = new RecaptchaVerifier('recaptcha-container', {\n      'size': 'invisible',\n      'callback': response => {\n        this.onSignInSubmit(); // reCAPTCHA solved, allow signInWithPhoneNumber.\n        // ...\n      }\n    }, auth);\n  }\n\n  onSignInSubmit() {\n    this.onCaptchVerify();\n    const phoneNumber = \"+972\" + this.state.mobile;\n    const appVerifier = window.recaptchaVerifier;\n    signInWithPhoneNumber(auth, phoneNumber, appVerifier).then(confirmationResult => {\n      // SMS sent. Prompt user to type the code from the message, then sign the\n      // user in with confirmationResult.confirm(code).\n      window.confirmationResult = confirmationResult;\n      alert(\"otp sended\");\n      this.setState({\n        verifyOtp: true\n      });\n    }).catch(error => {// Error; SMS not sent\n      // ...\n    });\n  }\n\n  verifyCode() {\n    window.confirmationResult.confirm(this.state.otp).then(result => {\n      // User signed in successfully.\n      const user = result.user;\n      console.log(user);\n      alert(\"Verification Done\");\n      this.setState({\n        verified: true,\n        verifyOtp: false\n      });\n    }).catch(error => {\n      alert(\"Invalid Otp\");\n    });\n  }\n\n  changeMobile(e) {\n    this.setState({\n      mobile: e.target.value\n    }, function () {\n      if (this.state.mobile.length === 10) {\n        this.setState({\n          verifyButton: true\n        });\n      }\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n\n    if (this.state.verified) {\n      const _this$state = this.state,\n            fname = _this$state.fname,\n            lname = _this$state.lname,\n            email = _this$state.email,\n            password = _this$state.password;\n      console.log(fname, lname, email, password);\n      fetch(\"http://localhost:5015/register\", {\n        method: \"POST\",\n        crossDomain: true,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\"\n        },\n        body: JSON.stringify({\n          fname,\n          email,\n          lname,\n          password\n        })\n      }).then(res => res.json()).then(data => {\n        console.log(data, \"userRegister\");\n      });\n    } else {\n      alert(\"Please Verify Mobile\");\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"auth-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      className: \"auth-inner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"Sign Up\"), React.createElement(\"div\", {\n      id: \"recaptcha-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"First name\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"First name\",\n      onChange: e => this.setState({\n        fname: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Last name\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Last name\",\n      onChange: e => this.setState({\n        lname: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Mobile\"), React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      placeholder: \"Enter mobile\",\n      onChange: e => this.changeMobile(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), this.state.verifyButton ? React.createElement(\"input\", {\n      type: \"button\",\n      value: this.state.verified ? \"Verified\" : \"Verify\",\n      onClick: this.onSignInSubmit,\n      style: {\n        backgroundColor: \"#0163d2\",\n        width: \"100%\",\n        padding: 8,\n        color: \"white\",\n        border: \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }) : null), this.state.verifyOtp ? React.createElement(\"div\", {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"OTP\"), React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      placeholder: \"Enter OTP\",\n      onChange: e => this.setState({\n        otp: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"button\",\n      value: \"OTP\",\n      onClick: this.verifyCode,\n      style: {\n        backgroundColor: \"#0163d2\",\n        width: \"100%\",\n        padding: 8,\n        color: \"white\",\n        border: \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    })) : null, React.createElement(\"div\", {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"Email address\"), React.createElement(\"input\", {\n      type: \"email\",\n      className: \"form-control\",\n      placeholder: \"Enter email\",\n      onChange: e => this.setState({\n        email: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      placeholder: \"Enter password\",\n      onChange: e => this.setState({\n        password: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"d-grid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"Sign Up\")), React.createElement(\"p\", {\n      className: \"forgot-password text-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"Already registered \", React.createElement(\"a\", {\n      href: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"sign in?\"))));\n  }\n\n}","map":{"version":3,"sources":["/Users/lior-atiya/Desktop/Programming/Facework/RoboFriends/src/pages/Register.js"],"names":["React","Component","app","getAuth","RecaptchaVerifier","signInWithPhoneNumber","auth","Register","constructor","props","state","fname","lname","email","password","verifyButton","verifyOtp","otp","verified","handleSubmit","bind","onSignInSubmit","verifyCode","onCaptchVerify","window","recaptchaVerifier","response","phoneNumber","mobile","appVerifier","then","confirmationResult","alert","setState","catch","error","confirm","result","user","console","log","changeMobile","e","target","value","length","preventDefault","fetch","method","crossDomain","headers","Accept","body","JSON","stringify","res","json","data","render","backgroundColor","width","padding","color","border"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport app from '../database/firebase_config'\nimport { getAuth, RecaptchaVerifier, signInWithPhoneNumber } from \"firebase/auth\";\n\nconst auth = getAuth(app)\n\nexport default class Register extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fname: \"\",\n      lname: \"\",\n      email: \"\",\n      password: \"\",\n      verifyButton: false,\n      verifyOtp: false,\n      otp: \"\",\n      verified: false,\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.onSignInSubmit = this.onSignInSubmit.bind(this);\n    this.verifyCode = this.verifyCode.bind(this);\n  }\n\n  onCaptchVerify() {\n    const auth = getAuth();\n    window.recaptchaVerifier = new RecaptchaVerifier('recaptcha-container', {\n      'size': 'invisible',\n      'callback': (response) => {\n        this.onSignInSubmit();\n        // reCAPTCHA solved, allow signInWithPhoneNumber.\n        // ...\n      },\n    }, auth);\n  }\n\n  onSignInSubmit() {\n    this.onCaptchVerify()\n    const phoneNumber = \"+972\" + this.state.mobile;\n    const appVerifier = window.recaptchaVerifier;\n\n    signInWithPhoneNumber(auth, phoneNumber, appVerifier)\n    .then((confirmationResult) => {\n      // SMS sent. Prompt user to type the code from the message, then sign the\n      // user in with confirmationResult.confirm(code).\n      window.confirmationResult = confirmationResult;\n      alert(\"otp sended\")\n      this.setState({ verifyOtp: true});\n    }).catch((error) => {\n      // Error; SMS not sent\n      // ...\n    });\n  }\n\n  verifyCode() {\n    window.confirmationResult.confirm(this.state.otp).then((result) => {\n      // User signed in successfully.\n      const user = result.user;\n      console.log(user);\n      alert(\"Verification Done\")\n      this.setState({verified: true, verifyOtp: false})\n    }).catch((error) => {\n      alert(\"Invalid Otp\")\n    });\n  }\n\n  changeMobile(e){\n    this.setState({ mobile: e.target.value }, function (){\n      if(this.state.mobile.length === 10) {\n        this.setState({\n          verifyButton: true,\n        })\n      }\n    })\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    if(this.state.verified) {\n      const { fname, lname, email, password } = this.state;\n      console.log(fname, lname, email, password);\n      fetch(\"http://localhost:5015/register\", {\n        method: \"POST\",\n        crossDomain: true,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\",\n        },\n        body: JSON.stringify({\n          fname,\n          email,\n          lname,\n          password,\n        }),\n      })\n        .then((res) => res.json())\n        .then((data) => {\n          console.log(data, \"userRegister\");\n        });\n    } else {\n      alert(\"Please Verify Mobile\")\n    }\n  }\n  render() {\n    return (\n      <div className=\"auth-wrapper\">\n      <form onSubmit={this.handleSubmit} className=\"auth-inner\">\n        <h3>Sign Up</h3>\n        <div id=\"recaptcha-container\"></div>\n\n        <div className=\"mb-3\">\n          <label>First name</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"First name\"\n            onChange={(e) => this.setState({ fname: e.target.value })}\n          />\n        </div>\n\n        <div className=\"mb-3\">\n          <label>Last name</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Last name\"\n            onChange={(e) => this.setState({ lname: e.target.value })}\n          />\n        </div>\n\n        <div className=\"mb-3\">\n          <label>Mobile</label>\n          <input\n            type=\"number\"\n            className=\"form-control\"\n            placeholder=\"Enter mobile\"\n            onChange={(e) => this.changeMobile(e)}\n          />\n          {this.state.verifyButton? <input \n          type=\"button\" \n          value={this.state.verified? \"Verified\" : \"Verify\"}\n          onClick={this.onSignInSubmit} \n          style={{backgroundColor:\"#0163d2\",width:\"100%\",padding:8, color:\"white\", border:\"none\"}}/>\n          : null}\n        </div>\n        \n        {this.state.verifyOtp? \n        <div className=\"mb-3\">\n          <label>OTP</label>\n          <input\n            type=\"number\"\n            className=\"form-control\"\n            placeholder=\"Enter OTP\"\n            onChange={(e) => this.setState({ otp: e.target.value })}\n          />\n          <input \n          type=\"button\" \n          value=\"OTP\" \n          onClick={this.verifyCode} \n          style={{backgroundColor:\"#0163d2\",width:\"100%\",padding:8, color:\"white\", border:\"none\"}}/>\n\n        </div>: null}\n\n        <div className=\"mb-3\">\n          <label>Email address</label>\n          <input\n            type=\"email\"\n            className=\"form-control\"\n            placeholder=\"Enter email\"\n            onChange={(e) => this.setState({ email: e.target.value })}\n          />\n        </div>\n\n        <div className=\"mb-3\">\n          <label>Password</label>\n          <input\n            type=\"password\"\n            className=\"form-control\"\n            placeholder=\"Enter password\"\n            onChange={(e) => this.setState({ password: e.target.value })}\n          />\n        </div>\n\n        <div className=\"d-grid\">\n          <button type=\"submit\" className=\"btn btn-primary\">\n            Sign Up\n          </button>\n        </div>\n        <p className=\"forgot-password text-right\">\n          Already registered <a href=\"/login\">sign in?</a>\n        </p>\n      </form>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}